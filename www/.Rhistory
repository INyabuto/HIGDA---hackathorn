runApp('Jkuat/Shiny/AfyaUzazi')
?seq_along
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
merged_spatial_list()
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
merged_spatial_list()
select_sorted_filtered_shape()[[1]]
select_sorted_filtered_shape()
select_sorted_filtered_shape()[[1]]
sorted <- select_sorted_filtered_shape()
sorted
str(sorted)
str(sorted[[1]])
str(sorted[1])
str(sorted)
filtered_shape[[1]][[4]]
str(filtered_shape[[1]][[4]])
str(filtered_shape[[2]][[4]])
sorted
str(sorted)
filtered_shape[[1]]
filtered_shape[[1]][[4]]
str(filtered_shape[[1]][[4]])
str(filtered_shape[[1]][[4]][[1]])
str(filtered_shape[[1]][[4]][1])
str(filtered_shape[[1]][[4]][2])
str(filtered_shape[[1]][[4]][3])
str(filtered_shape[[1]][[4]][4])
str(filtered_shape[[1]][[4]][5])
str(filtered_shape[[1]][[4]][6])
str(filtered_shape[[1]][[4]][7])
str(filtered_shape[[1]][[4]][8])
str(filtered_shape[[1]][[4]][9])
str(filtered_shape[[1]][[4]][10])
str(filtered_shape[[1]][[4]][6])
str(filtered_shape[[1]][[4]])
str(filtered_shape[[1]][[4]][6])
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
select_sorted_filtered_shape()
str(select_sorted_filtered_shape())
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
select_sorted_filtered_shape()
str(select_sorted_filtered_shape())
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
str(select_sorted_filtered_shape())
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
sorted_filtered_shape()
merged_spatial_list()
select_sorted_filtered_shape()[1]
runApp('Jkuat/Shiny/AfyaUzazi')
select_sorted_filtered_shape()
str(select_sorted_filtered_shape())
str(select_sorted_filtered_shape())
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
str(select_sorted_filtered_shape())
str(select_sorted_filtered_shape()[1])
str(select_sorted_filtered_shape()[[1]])
install.packages("sf")
house1.building <-  Polygon(rbind(c(1, 1),
c(2, 1),
c(2, 0),
c(1, 0)))
house1.roof <- Polygon(rbind(c(1.0, 1),
c(1.5, 2),
c(2.0, 1)))
house2.building <-  Polygon(rbind(c(3, 1),
c(4, 1),
c(4, 0),
c(3, 0)))
house2.roof <- Polygon(rbind(c(3.0, 1),
c(3.5, 2),
c(4.0, 1)))
house2.door <-  Polygon(rbind(c(3.25,0.75),
c(3.75,0.75),
c(3.75,0.00),
c(3.25,0.00)),
hole=TRUE)
library(sp)
library(raster)
library(rgdal)
house1.building <-  Polygon(rbind(c(1, 1),
c(2, 1),
c(2, 0),
c(1, 0)))
house1.roof <- Polygon(rbind(c(1.0, 1),
c(1.5, 2),
c(2.0, 1)))
house2.building <-  Polygon(rbind(c(3, 1),
c(4, 1),
c(4, 0),
c(3, 0)))
house2.roof <- Polygon(rbind(c(3.0, 1),
c(3.5, 2),
c(4.0, 1)))
house2.door <-  Polygon(rbind(c(3.25,0.75),
c(3.75,0.75),
c(3.75,0.00),
c(3.25,0.00)),
hole=TRUE)
h1 <- Polygons(list(house1.building,house1.roof),"house1")
h1
h2 <- Polygons(list(house2.building,house2.roof,house2.door),"house2")
str(h1)
houses <- SpatialPolygons(list(h1,h2))
houses
plot(houses)
attr <- data.frame(attr1=1:2,attr=6:5,row.names = c("house2","house1"))
attr
houses.DF <- SpatialPolygonsDataFrame(houses,attr)
as.data.frame(houses.DF)
spplot(houses.DF)
filtered_shape
class(filtered_shape)
filtered_shape_spdf <- SpatialPolygonsDataFrame(filtered_shape)
filtered_shape_polygons <- Polygons(filtered_shape)
filtered_shape_polygons <- Polygons(list(filtered_shape))
filtered_shape_sp<- SpatialPolygons(filtered_shape)
plot(filtered_shape)
str(filtered_shape)
SpatialMultiPoints(filtered_shape)
me <-SpatialMultiPoints(filtered_shape)
me
Polygon(filtered_shape)
coordinates(filtered_shape)
filtered_shape@type
filtered_shape@
data
filtered_shape$type
filtered_shape[[1]]
str(filtered_shape[[1]])
str(filtered_shape[[1]][[4]])
str(filtered_shape[[1]][[3]])
str(filtered_shape[[1]][[3]][[1]])
str(filtered_shape[[1]][[3]][[2]])
str(filtered_shape[[1]][[3]][[2]][[1]])
str(filtered_shape[[1]][[3]][[2]][[2]])
str(filtered_shape[[1]][[3]][[2]][[1]][[1]])
str(filtered_shape[[1]][[3]][[2]][[1]][[1]][[1]])
str(filtered_shape[[1]][[3]][[2]][[1]][[1]])
coordinates(filtered_shape)<- c("","")
coordinates(filtered_shape)<- c(" "," ")
coordinates(filtered_shape)
coordinates(filtered_shape) <- c("","")
as.SpatialPolygons.PolygonsList(filtered_shape)
?proj4string
class()
class(filtered_shape)
sp(filtered_shape)
map_ANC
is.projected(filtered_shape)
library(sp)
filtered_shape
filtered_shape[1]
first_shape <-filtered_shape[1]
str(first_shape)
first_shape_sp <- SpatialPolygons(first_shape)
plot(first_shape)
library(leaflet)
leaflet() %>% addTiles() %>% addGeoJSON(first_shape)
?addGeoJSON()
leaflet() %>% addTiles() %>% addGeoJSON(first_shape,fillColor = color,fillOpacity = 0.2)
color="green"
leaflet() %>% addTiles() %>% addGeoJSON(first_shape,fillColor = color,fillOpacity = 0.2)
first_shape[[1]]
str(first_shape[[1]])
str(first_shape[[2]])
str(first_shape[[1]][[1]])
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillColor = name,fillOpacity = 0.2)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillColor = id,fillOpacity = 0.2)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillColor = id,fillOpacity = 0.2,group=id)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillOpacity = 0.2,group=id)
leaflet(filtered_shape)
leaflet() %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-96,37.8,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-50,37.8,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-20,20.8,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-10,20.8,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-5,20.8,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,20.8,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,10,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,5,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,15,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,15,8) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,15,6) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,15,5) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,10,5) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-10,10,5) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-10,10,8) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-5,10,8) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-5,5,8) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-4,4,8) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-4,8,8) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-4,8,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,8,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,4,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,10,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,15,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(-1,17,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(0,17,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(1,17,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(4,17,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(5,17,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(5,10,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(8.4606,11.7799,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(8.4606,11.7799,8) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(6.4606,11.7799,8) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(6.4606,11.7799,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(6.4606,8.7799,4) %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% setView(6.4606,15.7799,4) %>% addGeoJSON(filtered_shape)
shiny::runApp('Jkuat/Shiny/AfyaUzazi')
anc
mydf
ANC_visit <- documeneted_anc1_data_frame() %>%
select(-orgID) %>%
spread(orgName,anc1_coverage) %>% mutate(month = 1:length(period))
ANC_visit
Preg_comp <- pregnancy_comp_anc1_df() %>%
select(-orgID,-anc1_coverage) %>%
spread(orgName,complications) %>% mutate(month = 1:length(period))
Preg_comp
anc
anc %>% select(-orgID) %>% group_by(orgName)
anc %>% select(-orgID) %>% group_by(orgName) %>% summarise(Total = sum(anc1_coverage))
anc %>% select(-orgID) %>% group_by(orgName) %>% summarise(Total = sum(as.numeric(anc1_coverage),na.rm=T))
ANC_visit
ANC_visit %>% summarise(Bo=sum(as.numeric(Bo),na.rm=T),
Bonthe=sum(as.numeric(Bonthe),na.rm = T),
Kailahun=sum(as.numeric(Kambia),na.rm = T),
Kambia=sum(as.numeric(Kailahun),na.rm = T),
Kenema=sum(as.numeric(Kenema),na.rm = T)))
ANC_visit %>% summarise(Bo=sum(as.numeric(Bo),na.rm=T),
Bonthe=sum(as.numeric(Bonthe),na.rm = T),
Kailahun=sum(as.numeric(Kailahun),na.rm = T),
Kambia=sum(as.numeric(Kambia),na.rm = T),
Kenema=sum(as.numeric(Kenema),na.rm = T))))
ANC_visit %>% summarise(Bo=sum(as.numeric(Bo),na.rm=T),
Bonthe=sum(as.numeric(Bonthe),na.rm = T),
Kailahun=sum(as.numeric(Kailahun),na.rm = T),
Kambia=sum(as.numeric(Kambia),na.rm = T),
Kenema=sum(as.numeric(Kenema),na.rm = T))
sum_anc <-ANC_visit %>% summarise(Bo=sum(as.numeric(Bo),na.rm=T),
Bonthe=sum(as.numeric(Bonthe),na.rm = T),
Kailahun=sum(as.numeric(Kailahun),na.rm = T),
Kambia=sum(as.numeric(Kambia),na.rm = T),
Kenema=sum(as.numeric(Kenema),na.rm = T))
sum_anc
sum_anc %>% gather(Bo:Kenema,ANC)
sum_anc %>% gather(1:5,ANC)
sum_anc %>% gather(OrgUnit,ANC,1:5)
sum_anc %>% gather(OrgUnit,ANC,1:5) %>% order(ANC)
sum_anc %>% gather(OrgUnit,ANC,1:5) %>% arrange(ANC)
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
shiny::runApp('Jkuat/Shiny/AfyaUzazi')
resp <- dhis2_rapi2("https://play.dhis2.org/release1/api/25/analytics.json?dimension=ou:O6uvpzGd5pu;PMa2VCrupOd;jUb8gELQApl;kJq2mPyFEHo;lc3eMKXaEfw&dimension=pe:LAST_12_MONTHS&filter=dx:dwEq7wi6nXV&displayProperty=NAME&skipMeta=true")
resp$content
str(resp$content)
str(resp$content$rows)
data <- resp$content$rows
sapply((data,"[[",3))
sapply(data,"[[",3)
sapply(data,"[[",1)
sapply(data,"[[",2)
runApp('Jkuat/Shiny/AfyaUzazi')
runApp('Jkuat/Shiny/AfyaUzazi')
library(leaflet)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape) %>% setView(1,8.0,4)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape) %>% setView(-11.746,8.505.0,4)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape) %>% setView(-11.746,8.505,0)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape) %>% setView(-11.746,8.505,4)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape) %>% setView(-11.746,8.505,9)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape) %>% setView(-11.746,8.505,7)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape) %>% setView(-11.746,8.505,8)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape) %>% setView(-11.746,8.505,7.5)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape) %>% setView(-11.746,8.505,7.5)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillColor = id) %>% setView(-11.746,8.505,7.5)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillColor = "green") %>% setView(-11.746,8.505,7.5)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillColor = "orange",fillOpacity = "") %>% setView(-11.746,8.505,7.5)
?colorBin
pal <- colorBin("viridis",NULL)
pal()
pal
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillColor = ~pal(id),fillOpacity = "") %>% setView(-11.746,8.505,7.5)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillColor = ~pal,fillOpacity = "") %>% setView(-11.746,8.505,7.5)
leaflet() %>% addTiles() %>% addGeoJSON(filtered_shape,fillColor = ~pal(),fillOpacity = "") %>% setView(-11.746,8.505,7.5)
select_sorted_filtered_shape()
select_sorted_filtered_shape()[[1]]
select_sorted_filtered_shape()[1]
str(select_sorted_filtered_shape())
sorted_filtered_shape()
str(sorted_filtered_shape())
str(select_sorted_filtered_shape())
str(sorted_filtered_shape()[[1]][[4]][[6]])
str(sorted_filtered_shape()[[1]][[4]][6])
str(sorted_filtered_shape()[[1]][[4]][6][1])
str(sorted_filtered_shape()[[1]][[4]][6][2])
str(sorted_filtered_shape()[[1]][[4]][6][1])
str(sorted_filtered_shape()[[1]][[4]][6])
str(sorted_filtered_shape()[[1]][[4]][6][1])
str(sorted_filtered_shape()[[1]][[4]][6][[1]])
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
sorted_filtered_shape()
select_sorted_filtered_shape()
str(select_sorted_filtered_shape())
merged_spatial_list()
sorted_filtered_shape()[[i]][[4]][6][[1]] <- select_sorted_filtered_shape()[[i]]
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial.R')
merged_spatial_list()
sorted_filtered_shape()[[1]][[4]][[6]][[1]]
sorted_filtered_shape()[[1]][[4]][[6]]
sorted_filtered_shape()[[1]][[4]][[6]]
select_sorted_filtered_shape()
select_sorted_filtered_shape()[[1]]
select_sorted_filtered_shape()[1]
select_sorted_filtered_shape()
mylist <-select_sorted_filtered_shape()
mylist
str(mylist)
str(mylist[1])
str(mylist[[1]])
str(mylist[2])
str(mylist[1])
str(mylist[2])
str(mylist[3])
str(mylist)
str(select_sorted_filtered_shape()[2])
str(select_sorted_filtered_shape()[3])
str(select_sorted_filtered_shape()[4])
str(select_sorted_filtered_shape()[5])
str(select_sorted_filtered_shape()[6])
str(select_sorted_filtered_shape()[7])
str(select_sorted_filtered_shape()[8])
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial_trial.R')
my_test()
source('~/Jkuat/Shiny/AfyaUzazi/www/spatial_trial.R')
my_test()
my_test()[[1]]
my_test()[[2]]
my_test()[1]
properties <- my_test()
str(properties)
properties <- list(my_test())
properties
my_test()[[1]]
my_test()[[1]][[1]]
my_test()[[1]][[1]][[1]]
source('~/.active-rstudio-document')
sorted_filtered_shape()
str(sorted_filtered_shape())
str(sorted_filtered_shape()[[1]])
str(sorted_filtered_shape()[[2]])
str(sorted_filtered_shape()[[1]])
str(sorted_filtered_shape()[[1]][[1]])
str(sorted_filtered_shape()[[1]][[1]])
str(sorted_filtered_shape()[[1]][[3]])
str(sorted_filtered_shape()[[1]][[4]])
str(sorted_filtered_shape()[1][[4]])
leaflet() %>% addTiles() %>% addGeoJSON(sorted_filtered_shape())
leaflet() %>% addTiles() %>% addGeoJSON(list(sorted_filtered_shape()))
length(sorted_filtered_shape())
str(sorted_filtered_shape)
str(sorted_filtered_shape())
str(sorted_filtered_shape()[[1]])
str(sorted_filtered_shape()[[2]])
str(sorted_filtered_shape()[[1]])
str(sorted_filtered_shape()[[3]])
str(sorted_filtered_shape()[[2]])
str(sorted_filtered_shape()[[4]])
str(sorted_filtered_shape()[[5]])
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
str(sorted_filtered_shape()[[5]])
str(sorted_filtered_shape)
str(sorted_filtered_shape())
length(sorted_filtered_shape())
source('~/.active-rstudio-document')
sorted_filtered_shape()
getwd()
setwd(".\\jkuat\\maps")
getwd()
setwd("..")
getwd()
eric <- geojsonio::geojson_read(".dhis2\\merged.json",what="sp")
eric <- geojsonio::geojson_read("dhis2\\merged.json",what="sp")
eric
leaflet() %>% addTiles() %>% addGeoJSON(eric)
eric <- geojsonio::geojson_read("dhis2\\merged.json",what="sp")
class(eric)
plot(eric)
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3)
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal)
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(id))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal("average"))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(Average_ANC))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal,values=1:5,opacity=1.0)
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal,values=1:5,opacity=1.0,labelFormat(transform=function(x)round(10^x)))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal,values=1:5,opacity=1.0, labelFormat= labelFormat(transform=function(x)round(10^x)))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal,values=1:5,opacity=1.0,labelFormat())
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal,values=1:5,opacity=1.0)
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal,values=1:5,opacity=1.0, labFormat = labelFormat(transform=function(x),round(10^x)))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal,values=1:5,opacity=1.0, labFormat = labelFormat(transform=function(x)round(10^x)))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal(1:5),values=1:5,opacity=1.0, labFormat = labelFormat(transform=function(x)round(10^x)))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal(1:5),values=<5,opacity=1.0, labFormat = labelFormat(transform=function(x)round(10^x)))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal(1:5),values=5,opacity=1.0, labFormat = labelFormat(transform=function(x)round(10^x)))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal(1<5),values=5,opacity=1.0, labFormat = labelFormat(transform=function(x)round(10^x)))
leaflet(eric) %>% addTiles() %>% addPolygons(stroke=FALSE,smoothFactor=0.3,fillColor = pal(1:5)) %>% addLegend(pal=pal,values=5,opacity=1.0, labFormat = labelFormat(transform=function(x)round(10^x)))
names(eric)
m <- leaflet(eric) %>% addTiles()
m
m %>% addPolygons()
bins <- c(0,10,20,50,100,120,Inf)
pal= colorBin("YlOrRd",domain = eric$average,bins=bins)
m %>% addPolygons(fillColor = ~pal(average),weight=2,opacity=1,color="white",dashArray=3,fillOpacity = 0.7)
m %>% addPolygons(fillColor = ~pal(average),weight=2,opacity=1,color="white",dashArray=3,fillOpacity = 0.7, highlight= highlightOptions(weight=5,color="#666",dashArray="",fillOpacity = 0.7,bringToFront=TRUE))
labels <- sprintf("<strong>%s</strong><br/>%g ANC1",eric$name,eric$average) %>% lapply(htmltools::HTML)
m %>% addPolygons(fillColor = ~pal(average),weight=2,opacity=1,color="white",dashArray=3,fillOpacity = 0.7, highlight= highlightOptions(weight=5,color="#666",dashArray="",fillOpacity = 0.7,bringToFront=TRUE),label=labels)
labels <- sprintf("<strong>%s</strong><br/>ANC1: %g",eric$name,eric$average) %>% lapply(htmltools::HTML)
m %>% addPolygons(fillColor = ~pal(average),weight=2,opacity=1,color="white",dashArray=3,fillOpacity = 0.7, highlight= highlightOptions(weight=5,color="#666",dashArray="",fillOpacity = 0.7,bringToFront=TRUE),label=labels)
m %>% addPolygons(fillColor = ~pal(average),weight=2,opacity=1,color="white",dashArray=3,fillOpacity = 0.7, highlight= highlightOptions(weight=5,color="#666",dashArray="",fillOpacity = 0.7,bringToFront=TRUE),label=labels,labelOptions(style=list("font-weight"="normal",padding="3px 8px"),textsize="15px",direction="auto"))
m %>% addPolygons(fillColor = ~pal(average),weight=2,opacity=1,color="white",dashArray=3,fillOpacity = 0.7, highlight= highlightOptions(weight=5,color="#666",dashArray="",fillOpacity = 0.7,bringToFront=TRUE),label=labels,labelOptions=labelOptions(style=list("font-weight"="normal",padding="3px 8px"),textsize="15px",direction="auto"))
m <-m %>% addPolygons(fillColor = ~pal(average),weight=2,opacity=1,color="white",dashArray=3,fillOpacity = 0.7, highlight= highlightOptions(weight=5,color="#666",dashArray="",fillOpacity = 0.7,bringToFront=TRUE),label=labels,labelOptions=labelOptions(style=list("font-weight"="normal",padding="3px 8px"),textsize="15px",direction="auto"))
m
m %>% addLegend(pal=pal,values=~Average,opacity=0.7,title="ANC1 coverge for the last 12 month",position="bottomright")
m %>% addLegend(pal=pal,values=~average,opacity=0.7,title="ANC1 coverge for the last 12 month",position="bottomright")
library(httr)
resp <- GET("https://play.dhis2.org/release1/api/organisationUnits.geojson?level=2",authenticate("admin","district"))
shape <- Filter(function(x)grepl("\\.geojson",x), sapply(content(res),"[[","name"))
shape <- Filter(function(x)grepl("\\.geojson",x), sapply(content(resp),"[[","name"))
shape <- Filter(function(x)grepl("\\.geojson",x), sapply(content(resp),"[[","id"))
resp
resp$content
shape <- Filter(function(x) grepl("\\.geojson",x), sapply(content(resp),"[[",1))
shape
shape <- Filter(function(x) grepl("\\.geojson",x), sapply(content(resp),"[[",2))
shape <- Filter(function(x) grepl("\\.geojson",x), sapply(content(resp),"[[",3))
shape <- Filter(function(x) grepl("\\.geojson",x), sapply(content(resp),"[[","name"))
shape <- Filter(function(x) grepl("\\.geojson",x), sapply(content(resp),"[[",))
str(shape)
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
res <- GET("https://api.github.com/repos/glynnbird/usstatesgeojson/contents")
res
res$content
res$cookies
res$content
st_names <- Filter(function(x)grepl("\\.geojson",x) sapply(content(res),"[[","name"))
st_names <- Filter(function(x)grepl("\\.geojson",x), sapply(content(res),"[[","name"))
st_names
base <-"https://raw.githubusercontent.com/glynnbird/usstatesgeojson/master/"
base
st_files <- paste0(base,st_names)
st_files
resp
shape <- Filter(function(x) grepl("\\.geojson",x), sapply(content(resp),"[[",1))
shape
parsed <- jsonlite::fromJSON(content(resp,"text"),simplifyVector = FALSE)
parsed
getwd()
setwd("C:\Users\Isaiah Nyabuto\Documents\Jkuat\Shiny\AfyaUzazi\www")
setwd("C:\\Users\\Isaiah Nyabuto\\Documents\\Jkuat\\Shiny\\AfyaUzazi\\www")
getwd()
anc_shapefile <- geojsonio::geojson_read("www\\merged.json",what="sp")
anc_shapefile <- geojsonio::geojson_read(".\\merged.json",what="sp")
anc_shapefile
class(anc_shapefile)
names(anc_shapefile)
m <- leaflet(anc_shapefile) %>% addTiles()
m
m %>% addPolygons()
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
runApp('~/Jkuat/Shiny/AfyaUzazi')
